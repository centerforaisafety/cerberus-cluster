## Nix

To install the Nix package manager run the install_nix.yml playbook.

To remove the Nix package manager run the uninstall_nix.yml playbook.

Both playbooks are idempotent. If you get an error running the uninstall_nix.yml playbook rerun the playbook. 

## Goslmailer
To install goslmailer run the goslmailer_install.yml and enter the slack_bot_token from the [slack bot app](https://app.slack.com/app-settings/T04PVJTPVCJ/A05AGQ7HNBX) (OAuth & Permissions -> OAuth Tokens for Your Workspace -> Bot User OAuth Token). Followed by the app password for the notification email (do-not-reply@safe.ai). This is generated by the following steps:
1. Enable 2fa for the account [https://myaccount.google.com/security](https://myaccount.google.com/security). Make sure you select the do-not-reply account on the login screen or change to it in the top right corner.
1. Now go to: [https://myaccount.google.com/apppasswords](https://myaccount.google.com/apppasswords). Again ensure you are on the correct account.
1. Press the "select app" dropdown and select "other". Then enter any name you like such as "CAIS Notifications". This will only be used here but should be recognizable.
1. Press "Generate" in the bottom right and copy this password (Copy this into terminal window when prompted).

To uninstall goslmailer run goslmailer_uninstall.yml. Note that this does not remove the MailProg entry from the slurm.conf. This won't cause problems but will be silently erroring in the slurmctld.log. So if you want to be clean you can remove that from the config.